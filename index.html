<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Malone by cyx</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Malone</h1>
        <p>Simple ruby mailing solution which always delivers.</p>

        <p class="view"><a href="https://github.com/cyx/malone">View the Project on GitHub <small>cyx/malone</small></a></p>


        <ul>
          <li><a href="https://github.com/cyx/malone/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/cyx/malone/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/cyx/malone">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="malone1----send-mail-using-smtp-without-any-fuss" class="anchor" href="#malone1----send-mail-using-smtp-without-any-fuss"><span class="octicon octicon-link"></span></a>malone(1) -- send mail using smtp without any fuss</h1>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>USAGE</h2>

<pre><code>require "malone"

# Typically you would do this somewhere in the bootstrapping
# part of your application

m = Malone.connect(url: "smtp://foo%40bar.com:pass@smtp.gmail.com:587",
                   domain: "mysite.com")

m.deliver(from: "me@me.com", to: "you@me.com",
          subject: "Test subject", text: "Great!")

# Malone.current will now remember the last configuration you setup.
Malone.current.config == m.config

# Now you can also do Malone.deliver, which is syntactic sugar
# for Malone.current.deliver
Malone.deliver(from: "me@me.com", to: "you@me.com",
               subject: "Test subject", text: "Great!")

# Also starting with Malone 1.0, you can pass in :html
# for multipart emails.

Malone.deliver(from: "me@me.com", to: "you@me.com",
               subject: "Test subject",
               text: "Great!", html: "&lt;b&gt;Great!&lt;/b&gt;")
</code></pre>

<h2>
<a name="testing" class="anchor" href="#testing"><span class="octicon octicon-link"></span></a>TESTING</h2>

<pre><code>require "malone/test"

m = Malone.connect(url: "smtp://foo%40bar.com:pass@smtp.gmail.com:587",
                   domain: "mysite.com")

m.deliver(from: "me@me.com", to: "you@me.com",
          subject: "Test subject", text: "Great!")

Malone.deliveries.size == 1
# =&gt; true

mail = Malone.deliveries.first

"me@me.com" == mail.from
# =&gt; true

"you@me.com" == mail.to
# =&gt; true

"FooBar" == mail.text
# =&gt; true

"Hello World" == envelope.subject
# =&gt; true
</code></pre>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>INSTALLATION</h2>

<pre><code>gem install malone
</code></pre>

<h2>
<a name="configuration-tips" class="anchor" href="#configuration-tips"><span class="octicon octicon-link"></span></a>CONFIGURATION TIPS</h2>

<p>If you're used to doing configuration via environment
variables, similar to how Heroku does configuration, then
you can simply set an environment variable in your
production machine like so:</p>

<pre><code>export MALONE_URL=smtp://foo%40bar.com:pass@smtp.gmail.com:587
</code></pre>

<p>Then you can connect using the environment variable in your
code like so:</p>

<pre><code>Malone.connect(url: ENV["MALONE_URL"])

# or quite simply
Malone.connect
</code></pre>

<p>By default Malone tries for the environment variable <code>MALONE_URL</code> when
you call <code>Malone.connect</code> without any arguments.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/cyx">cyx</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>